{"cells":[{"cell_type":"markdown","source":["Of course. Below is the Python code to create a full OBFR (Overnight Bank Funding Rate) dashboard using your API key.\n","\n","This script uses the `fredapi` library to fetch data from the Federal Reserve Economic Data (FRED) and the `dash` library to create an interactive web-based dashboard.\n","\n","### How to Run the Code:\n","\n","1.  **Install the necessary libraries:**\n","\n","    ```bash\n","    pip install pandas fredapi dash dash-core-components dash-html-components plotly\n","    ```\n","\n","2.  **Save the code:** Save the following code as a Python file (e.g., `obfr_dashboard.py`).\n","\n","3.  **Execute from your terminal:**\n","\n","    ```bash\n","    python obfr_dashboard.py\n","    ```\n","\n","4.  **View the dashboard:** Open a web browser and navigate to the address shown in your terminal (usually `http://127.0.0.1:8050/`).\n","\n","-----\n","\n","### OBFR Dashboard Code:"],"metadata":{"id":"Fs_1HYmS1oK2"}},{"cell_type":"code","source":["import pandas as pd\n","from fredapi import Fred\n","import dash\n","import dash_core_components as dcc\n","import dash_html_components as html\n","import plotly.express as px\n","\n","# Use your provided FRED API key\n","api_key = '7f8e44038ee69c4f78cf71873e85db16'\n","\n","# Initialize the Fred object with your API key\n","fred = Fred(api_key=api_key)\n","\n","# Fetch the Overnight Bank Funding Rate (OBFR) data\n","# The series ID for OBFR is 'OBFR'\n","try:\n","    obfr_series = fred.get_series('OBFR')\n","\n","    # Create a pandas DataFrame\n","    df = pd.DataFrame({\n","        'Date': obfr_series.index,\n","        'OBFR': obfr_series.values\n","    })\n","\n","    # Drop rows with missing values\n","    df.dropna(inplace=True)\n","\n","    # Get the most recent OBFR value and its date\n","    most_recent_value = df['OBFR'].iloc[-1]\n","    most_recent_date = df['Date'].iloc[-1].strftime('%Y-%m-%d')\n","\n","except Exception as e:\n","    print(f\"Error fetching data from FRED: {e}\")\n","    # Create an empty dataframe and default values if API fails\n","    df = pd.DataFrame({'Date': [], 'OBFR': []})\n","    most_recent_value = \"N/A\"\n","    most_recent_date = \"N/A\"\n","\n","# Create a Plotly figure for the time series\n","fig = px.line(df, x='Date', y='OBFR',\n","              title='Overnight Bank Funding Rate (OBFR) Over Time',\n","              labels={'Date': 'Date', 'OBFR': 'Rate (%)'})\n","\n","fig.update_layout(\n","    xaxis_title='Date',\n","    yaxis_title='Funding Rate (%)',\n","    template='plotly_dark',\n","    title_x=0.5\n",")\n","\n","\n","# Initialize the Dash app\n","app = dash.Dash(__name__)\n","server = app.server\n","\n","# Define the layout of the dashboard\n","app.layout = html.Div(style={'backgroundColor': '#111111', 'color': '#7FDBFF', 'font-family': 'sans-serif'}, children=[\n","    html.H1(\n","        children='OBFR Dashboard',\n","        style={\n","            'textAlign': 'center',\n","            'padding': '20px'\n","        }\n","    ),\n","\n","    html.Div(children='A dashboard displaying the latest Overnight Bank Funding Rate.', style={\n","        'textAlign': 'center',\n","        'padding-bottom': '20px'\n","    }),\n","\n","    html.Div(\n","        children=[\n","            html.Div(\n","                children=[\n","                    html.H3(\"Most Recent OBFR\", style={'textAlign': 'center'}),\n","                    html.P(f\"{most_recent_value:.2f}%\", style={'textAlign': 'center', 'fontSize': '2em'}),\n","                    html.P(f\"as of {most_recent_date}\", style={'textAlign': 'center'})\n","                ],\n","                style={'width': '30%', 'display': 'inline-block', 'verticalAlign': 'top', 'padding': '20px'}\n","            ),\n","            html.Div(\n","                dcc.Graph(\n","                    id='obfr-time-series-chart',\n","                    figure=fig\n","                ),\n","                style={'width': '70%', 'display': 'inline-block'}\n","            )\n","        ]\n","    )\n","])\n","\n","# Run the app\n","if __name__ == '__main__':\n","    app.run_server(debug=True)"],"outputs":[{"output_type":"error","ename":"ModuleNotFoundError","evalue":"No module named 'fredapi'","traceback":["\u001b[0;31m---------------------------------------------------------------------------\u001b[0m","\u001b[0;31mModuleNotFoundError\u001b[0m                       Traceback (most recent call last)","\u001b[0;32m/tmp/ipython-input-1-3797591680.py\u001b[0m in \u001b[0;36m<cell line: 0>\u001b[0;34m()\u001b[0m\n\u001b[1;32m      1\u001b[0m \u001b[0;32mimport\u001b[0m \u001b[0mpandas\u001b[0m \u001b[0;32mas\u001b[0m \u001b[0mpd\u001b[0m\u001b[0;34m\u001b[0m\u001b[0;34m\u001b[0m\u001b[0m\n\u001b[0;32m----> 2\u001b[0;31m \u001b[0;32mfrom\u001b[0m \u001b[0mfredapi\u001b[0m \u001b[0;32mimport\u001b[0m \u001b[0mFred\u001b[0m\u001b[0;34m\u001b[0m\u001b[0;34m\u001b[0m\u001b[0m\n\u001b[0m\u001b[1;32m      3\u001b[0m \u001b[0;32mimport\u001b[0m \u001b[0mdash\u001b[0m\u001b[0;34m\u001b[0m\u001b[0;34m\u001b[0m\u001b[0m\n\u001b[1;32m      4\u001b[0m \u001b[0;32mimport\u001b[0m \u001b[0mdash_core_components\u001b[0m \u001b[0;32mas\u001b[0m \u001b[0mdcc\u001b[0m\u001b[0;34m\u001b[0m\u001b[0;34m\u001b[0m\u001b[0m\n\u001b[1;32m      5\u001b[0m \u001b[0;32mimport\u001b[0m \u001b[0mdash_html_components\u001b[0m \u001b[0;32mas\u001b[0m \u001b[0mhtml\u001b[0m\u001b[0;34m\u001b[0m\u001b[0;34m\u001b[0m\u001b[0m\n","\u001b[0;31mModuleNotFoundError\u001b[0m: No module named 'fredapi'","","\u001b[0;31m---------------------------------------------------------------------------\u001b[0;32m\nNOTE: If your import is failing due to a missing package, you can\nmanually install dependencies using either !pip or !apt.\n\nTo view examples of installing some common dependencies, click the\n\"Open Examples\" button below.\n\u001b[0;31m---------------------------------------------------------------------------\u001b[0m\n"],"errorDetails":{"actions":[{"action":"open_url","actionText":"Open Examples","url":"/notebooks/snippets/importing_libraries.ipynb"}]}}],"execution_count":1,"metadata":{"colab":{"base_uri":"https://localhost:8080/","height":385},"id":"-tsEir_61oK5","executionInfo":{"status":"error","timestamp":1752646921319,"user_tz":240,"elapsed":1941,"user":{"displayName":"Bob Sheehan","userId":"08159093702253523584"}},"outputId":"0b4220e5-3c04-4843-f032-b5fdcff04aec"}},{"cell_type":"markdown","source":[],"metadata":{"id":"QYSpz4hf5lXw"}},{"cell_type":"code","source":["pip install FRED as fredapi"],"metadata":{"colab":{"base_uri":"https://localhost:8080/"},"id":"Q12fDG6j5ltM","executionInfo":{"status":"ok","timestamp":1752646984647,"user_tz":240,"elapsed":9244,"user":{"displayName":"Bob Sheehan","userId":"08159093702253523584"}},"outputId":"7c240a81-e99e-43f1-de18-e7f1d4df28da"},"execution_count":2,"outputs":[{"output_type":"stream","name":"stdout","text":["Collecting FRED\n","  Downloading fred-3.1.tar.gz (3.9 kB)\n","  Preparing metadata (setup.py) ... \u001b[?25l\u001b[?25hdone\n","\u001b[31mERROR: Could not find a version that satisfies the requirement as (from versions: none)\u001b[0m\u001b[31m\n","\u001b[0m\u001b[31mERROR: No matching distribution found for as\u001b[0m\u001b[31m\n","\u001b[0m"]}]},{"cell_type":"markdown","source":["### Dashboard Features:\n","\n","  * **Main Title:** A clear heading for the dashboard.\n","  * **Most Recent Value:** A card that highlights the latest available OBFR, so you can see the current rate at a glance.\n","  * **Interactive Time Series Chart:** A Plotly graph showing the historical trend of the OBFR. You can hover over the line to see values for specific dates, and zoom in on particular time periods.\n","  * **Dark Theme:** A modern, easy-on-the-eyes dark theme for the dashboard."],"metadata":{"id":"QDFH2_r91oK6"}}],"metadata":{"colab":{"provenance":[]},"kernelspec":{"display_name":"Python 3","name":"python3"}},"nbformat":4,"nbformat_minor":0}