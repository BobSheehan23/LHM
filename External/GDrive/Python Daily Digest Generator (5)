{"cells":[{"cell_type":"code","source":["import os\n","\n","# --- DATA FOR THE REPORT ---\n","# This data is for the July 17, 2025 report.\n","\n","REPORT_DATE = \"July 17, 2025\"\n","\n","MARKET_NOTES = {\n","    \"fee\": \"45.2 bps\",\n","    \"fee_change\": \"-0.24%\",\n","    \"fee_direction\": \"down\",\n","    \"utilization\": \"7.03%\",\n","    \"utilization_change\": \"+1.37%\",\n","    \"utilization_direction\": \"up\"\n","}\n","\n","HEADLINES = [\n","    {\n","        \"title\": \"Trump Discusses Firing Fed boss\",\n","        \"body\": \"In the latest of the ongoing tension between the US President and Federal Reserve Chair, Jerome Powell, reports emerged from the White House that Trump was planning to remove Powell but Trump has since responded and claimed that it is â€˜highly unlikelyâ€™ that he will. The focal point to this conflict is the contrast in approach to interest rates, with Trump searching for a 300bps reduction from the conservative 4% set by Powell.\",\n","        \"data_shows\": \"A notable rise in loaned shares across the U.S. Financials sector could be signaling growing investor caution regarding potential changes at the Federal Reserve. Our data shows a net increase of over 50 million shares on loan for U.S. financial companies over the past week. This may be an indication that some investors are worried about an abrupt change in the chairman role, and in turn, policy setting.\"\n","    },\n","    {\n","        \"title\": \"Samsung boss cleared of Fraud Charges\",\n","        \"body\": \"Samsung boss Lee Jae-Yong has been cleared of fraud charges by South Koreaâ€™s top court following a 5-year trial process. This comes following his role in a merger deal in 2015, where there were accusations of inflating the value of his pharmaceutical firm.\",\n","        \"data_shows\": \"Our data shows limited lending effects due to this trial. However, in the past months the tariff turbulence has significantly affected Samsung SDI, the battery and electronic materials manufacturing branch of the Korean tech giant. Since the tariff announcement on April 2nd, On Loan Quantity has risen significantly (over 2000% from the months prior). In Q2 2025, On Loan Quantity averaged 1.21 million shares, up 4777% YoY, and borrowing costs rose 95% YoY to 44.92 bps showing a significant increase in borrower interest in the stock.\"\n","    },\n","    {\n","        \"title\": \"Layoff Wave Hits Multiple Sectors, AI Reshaping Workforce\",\n","        \"body\": \"2025 is seeing widespread job cuts across sectors, with firms like Intel, Meta, Microsoft, and Chevron announcing thousands of layoffs. A key cause of this has been AI, with over 40% of companies expecting further workforce reductions by 2030. Still, areas like fintech and big data are seeing growth, creating a realignment in employment patterns.\",\n","        \"data_shows\": \"Many AI firms are blooming in the wake of job cuts elsewhere, with one of the latest companies highlighted by EquiLendâ€™s Data & Analytics being Quantum Computing Inc (QUBT). The borrowing cost of the AI firm has been extremely volatile since November last year, with an 11,000-bps peak in early January. On Loan Quantity has also risen over this time from under 5 million shares on loan in mid-November last year to peaks of over 35 million shares this month.\"\n","    }\n","]\n","\n","# Data from \"Hot & Getting Hotter\" table\n","HARD_TO_BORROW_DATA = [\n","    {\"ticker\": \"OP\", \"name\": \"OCEANPAL INC ORD (POST REV SPLT)\", \"industry\": \"Transportation\", \"fee\": \"90,000+\", \"momentum\": \"+2,725 BPS\", \"momentum_direction\": \"up\"},\n","    {\"ticker\": \"FOXX\", \"name\": \"FOXX DEVELOPMENT HOLDINGS INC COM\", \"industry\": \"Technology Hardware and Equi\", \"fee\": \"90,000+\", \"momentum\": \"+3,492 BPS\", \"momentum_direction\": \"up\"},\n","    {\"ticker\": \"WBUY\", \"name\": \"WEBUY GLOBAL LTD COM (POST SPT)\", \"industry\": \"Food and Staples Retailing\", \"fee\": \"70,000 to 89,999\", \"momentum\": \"+5,305 BPS\", \"momentum_direction\": \"up\"},\n","    {\"ticker\": \"SLRX\", \"name\": \"SALARIUS PHARMACEUTICALS INC COM (POST REV SPL\", \"industry\": \"Biotechnology\", \"fee\": \"70,000 to 89,999\", \"momentum\": \"+4,301 BPS\", \"momentum_direction\": \"up\"},\n","    {\"ticker\": \"NXTT\", \"name\": \"NEXT TECHNOLOGY HOLDING INC COM NPV (POST REV SPLIT)\", \"industry\": \"Software and Services\", \"fee\": \"70,000 to 89,999\", \"momentum\": \"+944 BPS\", \"momentum_direction\": \"up\"}\n","]\n","\n","# Data from \"Market Technicals & Squeeze Metrics\" table\n","SHORT_SQUEEZE_DATA = [\n","    {\"ticker\": \"BTCS\", \"name\": \"BTCS INC COM (POST REV SPLT)\", \"industry\": \"Software and Services\", \"price\": \"$5.76\", \"price_wow\": \"N/A\", \"price_direction\": \"neutral\", \"score\": \"83\", \"score_wow\": \"+33\", \"score_direction\": \"up\"},\n","    {\"ticker\": \"GALT\", \"name\": \"GALECTIN THERAPEUTICS INC COM\", \"industry\": \"Biotechnology\", \"price\": \"$2.85\", \"price_wow\": \"N/A\", \"price_direction\": \"neutral\", \"score\": \"79\", \"score_wow\": \"+10\", \"score_direction\": \"up\"},\n","    {\"ticker\": \"LXRX\", \"name\": \"LEXICON PHARMACEUTICALS INC 144A\", \"industry\": \"Biotechnology\", \"price\": \"$1.29\", \"price_wow\": \"N/A\", \"price_direction\": \"neutral\", \"score\": \"79\", \"score_wow\": \"+28\", \"score_direction\": \"up\"},\n","    {\"ticker\": \"SBET\", \"name\": \"SHARPLINK GAMING INC COM (PST SPT)\", \"industry\": \"Consumer Services\", \"price\": \"$37.38\", \"price_wow\": \"N/A\", \"price_direction\": \"neutral\", \"score\": \"78\", \"score_wow\": \"+59\", \"score_direction\": \"up\"},\n","    {\"ticker\": \"CONL\", \"name\": \"GRANITESHARES ETF TRUST 2X LONG COIN DAILY ETF\", \"industry\": \"Financials\", \"price\": \"$58.45\", \"price_wow\": \"N/A\", \"price_direction\": \"neutral\", \"score\": \"77\", \"score_wow\": \"+6\", \"score_direction\": \"up\"}\n","]\n","\n","KEY_TAKEAWAYS = [\n","    \"Markets stabilize after Trump Fed drama with Treasury Yields and the dollar rebounding. However, there may be concerns about an abrupt change in monetary policy.\",\n","    \"AI continues to be a point of focus both for companies and investors. Tech earnings are underway with AI driving strong Q2 results for many tech giants.\",\n","    \"Inflation remains a hot topic globally with the latest rises seen in the UK and debate still ongoing in the US.\"\n","]\n","\n","# --- HTML GENERATION FUNCTIONS ---\n","\n","def get_arrow_svg(direction):\n","    \"\"\"Returns the SVG for an up or down arrow, or a neutral icon.\"\"\"\n","    if direction == \"up\":\n","        return '<svg xmlns=\"http://www.w3.org/2000/svg\" class=\"h-4 w-4\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\"><path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M13 7l5 5-5 5m5-5H6\" /></svg>'\n","    elif direction == \"down\":\n","        return '<svg xmlns=\"http://www.w3.org/2000/svg\" class=\"h-4 w-4\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\"><path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M13 17l-5-5 5-5m-5 5h12\" /></svg>'\n","    else: # neutral\n","        return ''\n","\n","\n","def generate_market_notes_html(notes):\n","    \"\"\"Generates the HTML for the Market Notes section.\"\"\"\n","    fee_change_val = notes['fee_change'].replace('-', '')\n","    util_change_val = notes['utilization_change'].replace('+', '')\n","\n","    fee_arrow_svg = get_arrow_svg(notes['fee_direction'])\n","    util_arrow_svg = get_arrow_svg(notes['utilization_direction'])\n","\n","    return f\"\"\"\n","            <!-- Market Notes Section -->\n","            <section>\n","                <h2 class=\"text-2xl font-bold text-slate-800 mb-4 flex items-center\">\n","                    <span class=\"text-2xl mr-3\">ðŸ“ˆ</span> Market Notes\n","                </h2>\n","                <div class=\"grid grid-cols-1 sm:grid-cols-2 gap-4 text-center bg-slate-50 p-4 rounded-lg\">\n","                    <div class=\"p-2\">\n","                        <p class=\"text-sm text-slate-500\">Average Fee</p>\n","                        <p class=\"text-xl font-semibold text-slate-700 flex items-center justify-center\">\n","                            {notes['fee']}\n","                            <span class=\"arrow-{notes['fee_direction']} ml-2 flex items-center text-base\">\n","                                {fee_arrow_svg}\n","                                {fee_change_val}\n","                            </span>\n","                        </p>\n","                    </div>\n","                    <div class=\"p-2\">\n","                        <p class=\"text-sm text-slate-500\">Average Utilization</p>\n","                        <p class=\"text-xl font-semibold text-slate-700 flex items-center justify-center\">\n","                            {notes['utilization']}\n","                            <span class=\"arrow-{notes['utilization_direction']} ml-2 flex items-center text-base\">\n","                                {util_arrow_svg}\n","                                {util_change_val}\n","                            </span>\n","                        </p>\n","                    </div>\n","                </div>\n","            </section>\n","    \"\"\"\n","\n","def generate_headlines_html(headlines_data):\n","    \"\"\"Generates the HTML for the Major Headlines section.\"\"\"\n","    articles_html = \"\"\n","    for headline in headlines_data:\n","        articles_html += f\"\"\"\n","                    <!-- Headline -->\n","                    <article>\n","                        <h3 class=\"font-bold text-lg text-slate-800\">{headline['title']}</h3>\n","                        <p class=\"mt-2 text-slate-600\">{headline['body']}</p>\n","                        <div class=\"mt-4 border-l-4 border-purple-700 pl-4\">\n","                            <p class=\"font-semibold text-slate-700\">What Our Data Shows:</p>\n","                            <p class=\"mt-1 text-slate-600\">{headline['data_shows']}</p>\n","                        </div>\n","                    </article>\n","        \"\"\"\n","    return f\"\"\"\n","            <!-- Major Headlines Section -->\n","            <section>\n","                <h2 class=\"text-2xl font-bold text-slate-800 mb-6 flex items-center\">\n","                    <span class=\"text-2xl mr-3\">ðŸ”¥</span> Major Headlines & What Our Data Shows\n","                </h2>\n","                <div class=\"space-y-8\">\n","                    {articles_html}\n","                </div>\n","            </section>\n","    \"\"\"\n","\n","def generate_htb_table_html(data):\n","    \"\"\"Generates the HTML for the Hard-to-Borrow table.\"\"\"\n","    rows_html = \"\"\n","    for i, row in enumerate(data):\n","        bg_class = \"bg-slate-50\" if i % 2 != 0 else \"\"\n","        rows_html += f\"\"\"\n","                            <tr class=\"{bg_class}\">\n","                                <td class=\"px-6 py-4 whitespace-nowrap text-sm font-medium text-black\">{row['ticker']}</td>\n","                                <td class=\"px-6 py-4 whitespace-nowrap text-sm text-black\">{row['name']}</td>\n","                                <td class=\"px-6 py-4 whitespace-nowrap text-sm text-black\">{row['industry']}</td>\n","                                <td class=\"px-6 py-4 whitespace-nowrap text-sm text-black\">{row['fee']}</td>\n","                            </tr>\n","        \"\"\"\n","    return f\"\"\"\n","                    <!-- Today's Specials & Hard-to-Borrow Table -->\n","                    <table class=\"min-w-full divide-y divide-slate-200\">\n","                        <thead class=\"bg-sky-600 text-white\">\n","                            <tr>\n","                                <th scope=\"col\" class=\"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider\">Ticker</th>\n","                                <th scope=\"col\" class=\"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider\">Name</th>\n","                                <th scope=\"col\" class=\"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider\">Industry</th>\n","                                <th scope=\"col\" class=\"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider\">Fee (BPS)</th>\n","                            </tr>\n","                        </thead>\n","                        <tbody class=\"bg-white divide-y divide-slate-200\">\n","                            {rows_html}\n","                        </tbody>\n","                    </table>\n","    \"\"\"\n","\n","def generate_squeeze_table_html(data):\n","    \"\"\"Generates the HTML for the Short Squeeze table.\"\"\"\n","    rows_html = \"\"\n","    for i, row in enumerate(data):\n","        bg_class = \"bg-slate-50\" if i % 2 != 0 else \"\"\n","        rows_html += f\"\"\"\n","                            <tr class=\"{bg_class}\">\n","                                <td class=\"px-6 py-4 whitespace-nowrap text-sm font-medium text-black\">{row['ticker']}</td>\n","                                <td class=\"px-6 py-4 whitespace-nowrap text-sm text-black\">{row['name']}</td>\n","                                <td class=\"px-6 py-4 whitespace-nowrap text-sm text-black\">{row['industry']}</td>\n","                                <td class=\"px-6 py-4 whitespace-nowrap text-sm text-black\">${row['price']}</td>\n","                                <td class=\"px-6 py-4 whitespace-nowrap text-sm text-black\">{row['score']}</td>\n","                            </tr>\n","        \"\"\"\n","    return f\"\"\"\n","                    <!-- Market Technicals & Squeeze Metrics Table -->\n","                    <table class=\"min-w-full divide-y divide-slate-200\">\n","                        <thead class=\"bg-sky-600 text-white\">\n","                            <tr>\n","                                <th scope=\"col\" class=\"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider\">Ticker</th>\n","                                <th scope=\"col\" class=\"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider\">Company Name</th>\n","                                <th scope=\"col\" class=\"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider\">Industry</th>\n","                                <th scope=\"col\" class=\"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider\">Price</th>\n","                                <th scope=\"col\" class=\"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider\">Short Squeeze Score</th>\n","                            </tr>\n","                        </thead>\n","                        <tbody class=\"bg-white divide-y divide-slate-200\">\n","                            {rows_html}\n","                        </tbody>\n","                    </table>\n","    \"\"\"\n","\n","def generate_takeaways_html(takeaways_data):\n","    \"\"\"Generates the HTML for the Key Takeaways section.\"\"\"\n","    list_items_html = \"\"\n","    for item in takeaways_data:\n","        list_items_html += f\"<li>{item}</li>\\n\"\n","\n","    return f\"\"\"\n","            <!-- Key Takeaways Section -->\n","            <section>\n","                <h2 class=\"text-2xl font-bold text-slate-800 mb-4 flex items-center\">\n","                    <span class=\"text-2xl mr-3\">ðŸ’¡</span> Key Takeaways\n","                </h2>\n","                <ul class=\"space-y-3 list-disc list-inside text-slate-700\">\n","                    {list_items_html}\n","                </ul>\n","            </section>\n","    \"\"\"\n","\n","def create_report_html(date, market_notes, headlines, htb_data, squeeze_data, takeaways):\n","    \"\"\"Assembles the full HTML document from all the pieces.\"\"\"\n","\n","    # Generate HTML for each section\n","    market_notes_section = generate_market_notes_html(market_notes)\n","    headlines_section = generate_headlines_html(headlines)\n","    htb_table_section = generate_htb_table_html(htb_data)\n","    squeeze_table_section = generate_squeeze_table_html(squeeze_data)\n","    takeaways_section = generate_takeaways_html(takeaways)\n","\n","    # Assemble the final HTML\n","    full_html = f\"\"\"\n","<!DOCTYPE html>\n","<html lang=\"en\">\n","<head>\n","    <meta charset=\"UTF-8\">\n","    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n","    <title>EquiLend D&A Daily Digest - {date}</title>\n","    <script src=\"https://cdn.tailwindcss.com\"></script>\n","    <link rel=\"preconnect\" href=\"https://fonts.googleapis.com\">\n","    <link rel=\"preconnect\" href=\"https://fonts.gstatic.com\" crossorigin>\n","    <link href=\"https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap\" rel=\"stylesheet\">\n","    <style>\n","        body {{\n","            font-family: 'Inter', sans-serif;\n","        }}\n","        /* Simple styling for up/down arrows */\n","        .arrow-up {{ color: #16a34a; }} /* Green */\n","        .arrow-down {{ color: #dc2626; }} /* Red */\n","        table {{\n","            table-layout: auto; /* Changed from fixed to auto */\n","            width: 100%; /* Ensure table takes full width */\n","        }}\n","        th, td {{\n","            white-space: normal; /* Allow text wrapping */\n","            word-wrap: break-word; /* Break long words */\n","        }}\n","    </style>\n","</head>\n","<body class=\"bg-slate-100\">\n","\n","    <div class=\"container mx-auto p-4 sm:p-6 md:p-8 max-w-4xl\">\n","\n","        <!-- Header Section -->\n","        <header class=\"bg-sky-600 text-white p-6 rounded-t-xl\">\n","            <h1 class=\"text-3xl md:text-4xl font-bold\">EquiLend D&A Daily Digest</h1>\n","            <p class=\"text-lg text-sky-200 mt-1\">{date}</p>\n","        </header>\n","\n","        <div class=\"bg-white rounded-b-xl shadow-md p-6 sm:p-8 space-y-8\">\n","\n","            {market_notes_section}\n","\n","            <hr class=\"border-slate-200\">\n","\n","            {headlines_section}\n","\n","            <hr class=\"border-slate-200\">\n","\n","            <!-- Tables Section -->\n","            <section>\n","                <h2 class=\"text-2xl font-bold text-slate-800 mb-4 flex items-center\">\n","                    <span class=\"text-2xl mr-3\">ðŸ“Š</span> Today's Specials & Hard-to-Borrow\n","                </h2>\n","                <div class=\"overflow-x-auto mb-8\">\n","                    {htb_table_section}\n","                </div>\n","\n","                <h2 class=\"text-2xl font-bold text-slate-800 mb-4 flex items-center\">\n","                    <span class=\"text-2xl mr-3\">ðŸ“‰</span> Market Technicals & Squeeze Metrics\n","                </h2>\n","                <div class=\"overflow-x-auto\">\n","                    {squeeze_table_section}\n","                </div>\n","            </section>\n","\n","            <hr class=\"border-slate-200\">\n","\n","            {takeaways_section}\n","\n","        </div>\n","\n","        <!-- Footer -->\n","        <footer class=\"text-center mt-8\">\n","            <p class=\"text-sm text-slate-500\">Source: EquiLend Data & Analytics</p>\n","        </footer>\n","\n","    </div>\n","\n","</body>\n","</html>\n","\"\"\"\n","    return full_html\n","\n","# --- MAIN EXECUTION ---\n","if __name__ == \"__main__\":\n","    # Generate the full HTML content\n","    report_html = create_report_html(\n","        REPORT_DATE,\n","        MARKET_NOTES,\n","        HEADLINES,\n","        HARD_TO_BORROW_DATA,\n","        SHORT_SQUEEZE_DATA,\n","        KEY_TAKEAWAYS\n","    )\n","\n","    # Write the HTML to a file\n","    file_name = f\"daily_digest_{REPORT_DATE.replace(' ', '_').replace(',', '')}.html\"\n","    with open(file_name, \"w\", encoding=\"utf-8\") as f:\n","        f.write(report_html)\n","\n","    print(f\"Report successfully generated: {os.path.abspath(file_name)}\")"],"outputs":[{"output_type":"stream","name":"stdout","text":["Report successfully generated: /content/daily_digest_July_17_2025.html\n"]}],"execution_count":5,"metadata":{"colab":{"base_uri":"https://localhost:8080/"},"id":"03p2zKOYpyzT","executionInfo":{"status":"ok","timestamp":1752761946216,"user_tz":240,"elapsed":43,"user":{"displayName":"Bob Sheehan","userId":"08159093702253523584"}},"outputId":"3492c9c5-78a7-4a06-830a-3d72bcddfa3f"}},{"cell_type":"markdown","metadata":{"id":"63db748e"},"source":["# Task\n","Generate an email from my gmail with the generated HTML file as an attachment."]},{"cell_type":"markdown","metadata":{"id":"2862eac8"},"source":["## Setup google api client\n","\n","### Subtask:\n","Set up the Google API client and authenticate with your Gmail account.\n"]},{"cell_type":"markdown","metadata":{"id":"26c8c1e5"},"source":["**Reasoning**:\n","Install the necessary libraries for interacting with the Google API, specifically the Gmail API.\n","\n"]},{"cell_type":"code","metadata":{"colab":{"base_uri":"https://localhost:8080/"},"id":"f55c925a","executionInfo":{"status":"ok","timestamp":1752760429162,"user_tz":240,"elapsed":9455,"user":{"displayName":"Bob Sheehan","userId":"08159093702253523584"}},"outputId":"dbd6933d-f4eb-484f-e033-bbcc66f2382a"},"source":["%pip install --upgrade google-api-python-client google-auth-httplib2 google-auth-oauthlib"],"execution_count":3,"outputs":[{"output_type":"stream","name":"stdout","text":["Requirement already satisfied: google-api-python-client in /usr/local/lib/python3.11/dist-packages (2.176.0)\n","Requirement already satisfied: google-auth-httplib2 in /usr/local/lib/python3.11/dist-packages (0.2.0)\n","Requirement already satisfied: google-auth-oauthlib in /usr/local/lib/python3.11/dist-packages (1.2.2)\n","Requirement already satisfied: httplib2<1.0.0,>=0.19.0 in /usr/local/lib/python3.11/dist-packages (from google-api-python-client) (0.22.0)\n","Requirement already satisfied: google-auth!=2.24.0,!=2.25.0,<3.0.0,>=1.32.0 in /usr/local/lib/python3.11/dist-packages (from google-api-python-client) (2.38.0)\n","Requirement already satisfied: google-api-core!=2.0.*,!=2.1.*,!=2.2.*,!=2.3.0,<3.0.0,>=1.31.5 in /usr/local/lib/python3.11/dist-packages (from google-api-python-client) (2.25.1)\n","Requirement already satisfied: uritemplate<5,>=3.0.1 in /usr/local/lib/python3.11/dist-packages (from google-api-python-client) (4.2.0)\n","Requirement already satisfied: requests-oauthlib>=0.7.0 in /usr/local/lib/python3.11/dist-packages (from google-auth-oauthlib) (2.0.0)\n","Requirement already satisfied: googleapis-common-protos<2.0.0,>=1.56.2 in /usr/local/lib/python3.11/dist-packages (from google-api-core!=2.0.*,!=2.1.*,!=2.2.*,!=2.3.0,<3.0.0,>=1.31.5->google-api-python-client) (1.70.0)\n","Requirement already satisfied: protobuf!=3.20.0,!=3.20.1,!=4.21.0,!=4.21.1,!=4.21.2,!=4.21.3,!=4.21.4,!=4.21.5,<7.0.0,>=3.19.5 in /usr/local/lib/python3.11/dist-packages (from google-api-core!=2.0.*,!=2.1.*,!=2.2.*,!=2.3.0,<3.0.0,>=1.31.5->google-api-python-client) (5.29.5)\n","Requirement already satisfied: proto-plus<2.0.0,>=1.22.3 in /usr/local/lib/python3.11/dist-packages (from google-api-core!=2.0.*,!=2.1.*,!=2.2.*,!=2.3.0,<3.0.0,>=1.31.5->google-api-python-client) (1.26.1)\n","Requirement already satisfied: requests<3.0.0,>=2.18.0 in /usr/local/lib/python3.11/dist-packages (from google-api-core!=2.0.*,!=2.1.*,!=2.2.*,!=2.3.0,<3.0.0,>=1.31.5->google-api-python-client) (2.32.3)\n","Requirement already satisfied: cachetools<6.0,>=2.0.0 in /usr/local/lib/python3.11/dist-packages (from google-auth!=2.24.0,!=2.25.0,<3.0.0,>=1.32.0->google-api-python-client) (5.5.2)\n","Requirement already satisfied: pyasn1-modules>=0.2.1 in /usr/local/lib/python3.11/dist-packages (from google-auth!=2.24.0,!=2.25.0,<3.0.0,>=1.32.0->google-api-python-client) (0.4.2)\n","Requirement already satisfied: rsa<5,>=3.1.4 in /usr/local/lib/python3.11/dist-packages (from google-auth!=2.24.0,!=2.25.0,<3.0.0,>=1.32.0->google-api-python-client) (4.9.1)\n","Requirement already satisfied: pyparsing!=3.0.0,!=3.0.1,!=3.0.2,!=3.0.3,<4,>=2.4.2 in /usr/local/lib/python3.11/dist-packages (from httplib2<1.0.0,>=0.19.0->google-api-python-client) (3.2.3)\n","Requirement already satisfied: oauthlib>=3.0.0 in /usr/local/lib/python3.11/dist-packages (from requests-oauthlib>=0.7.0->google-auth-oauthlib) (3.3.1)\n","Requirement already satisfied: pyasn1<0.7.0,>=0.6.1 in /usr/local/lib/python3.11/dist-packages (from pyasn1-modules>=0.2.1->google-auth!=2.24.0,!=2.25.0,<3.0.0,>=1.32.0->google-api-python-client) (0.6.1)\n","Requirement already satisfied: charset-normalizer<4,>=2 in /usr/local/lib/python3.11/dist-packages (from requests<3.0.0,>=2.18.0->google-api-core!=2.0.*,!=2.1.*,!=2.2.*,!=2.3.0,<3.0.0,>=1.31.5->google-api-python-client) (3.4.2)\n","Requirement already satisfied: idna<4,>=2.5 in /usr/local/lib/python3.11/dist-packages (from requests<3.0.0,>=2.18.0->google-api-core!=2.0.*,!=2.1.*,!=2.2.*,!=2.3.0,<3.0.0,>=1.31.5->google-api-python-client) (3.10)\n","Requirement already satisfied: urllib3<3,>=1.21.1 in /usr/local/lib/python3.11/dist-packages (from requests<3.0.0,>=2.18.0->google-api-core!=2.0.*,!=2.1.*,!=2.2.*,!=2.3.0,<3.0.0,>=1.31.5->google-api-python-client) (2.4.0)\n","Requirement already satisfied: certifi>=2017.4.17 in /usr/local/lib/python3.11/dist-packages (from requests<3.0.0,>=2.18.0->google-api-core!=2.0.*,!=2.1.*,!=2.2.*,!=2.3.0,<3.0.0,>=1.31.5->google-api-python-client) (2025.7.14)\n"]}]},{"cell_type":"markdown","metadata":{"id":"00d18e0b"},"source":["**Reasoning**:\n","Load the credentials from the `credentials.json` file, handle the authentication flow to get credentials, and build the Gmail service object using the obtained credentials and the specified scope.\n","\n"]},{"cell_type":"code","metadata":{"colab":{"base_uri":"https://localhost:8080/","height":332},"id":"070c8063","executionInfo":{"status":"error","timestamp":1752760438795,"user_tz":240,"elapsed":1120,"user":{"displayName":"Bob Sheehan","userId":"08159093702253523584"}},"outputId":"d506f139-711f-4cee-dfaa-f29b025924dd"},"source":["import os.path\n","\n","from google.auth.transport.requests import Request\n","from google.oauth2.credentials import Credentials\n","from google_auth_oauthlib.flow import InstalledAppFlow\n","from googleapiclient.discovery import build\n","from googleapiclient.errors import HttpError\n","\n","# If modifying these scopes, delete the file token.json.\n","SCOPES = [\"https://www.googleapis.com/auth/gmail.send\"]\n","\n","creds = None\n","# The file token.json stores the user's access and refresh tokens, and is\n","# created automatically when the authorization flow completes for the first\n","# time.\n","if os.path.exists(\"token.json\"):\n","    creds = Credentials.from_authorized_user_file(\"token.json\", SCOPES)\n","# If there are no (valid) credentials available, let the user log in.\n","if not creds or not creds.valid:\n","    if creds and creds.expired and creds.refresh_token:\n","        creds.refresh(Request())\n","    else:\n","        flow = InstalledAppFlow.from_client_secrets_file(\n","            \"credentials.json\", SCOPES\n","        )\n","        creds = flow.run_local_server(port=0)\n","    # Save the credentials for the next run\n","    with open(\"token.json\", \"w\") as token:\n","        token.write(creds.to_json())\n","\n","try:\n","    # Call the Gmail API\n","    service = build(\"gmail\", \"v1\", credentials=creds)\n","    print(\"Gmail service object created successfully.\")\n","\n","except HttpError as error:\n","    # TODO(developer) - Handle errors from gmail API.\n","    print(f\"An error occurred: {error}\")\n"],"execution_count":4,"outputs":[{"output_type":"error","ename":"FileNotFoundError","evalue":"[Errno 2] No such file or directory: 'credentials.json'","traceback":["\u001b[0;31m---------------------------------------------------------------------------\u001b[0m","\u001b[0;31mFileNotFoundError\u001b[0m                         Traceback (most recent call last)","\u001b[0;32m/tmp/ipython-input-4-356083444.py\u001b[0m in \u001b[0;36m<cell line: 0>\u001b[0;34m()\u001b[0m\n\u001b[1;32m     21\u001b[0m         \u001b[0mcreds\u001b[0m\u001b[0;34m.\u001b[0m\u001b[0mrefresh\u001b[0m\u001b[0;34m(\u001b[0m\u001b[0mRequest\u001b[0m\u001b[0;34m(\u001b[0m\u001b[0;34m)\u001b[0m\u001b[0;34m)\u001b[0m\u001b[0;34m\u001b[0m\u001b[0;34m\u001b[0m\u001b[0m\n\u001b[1;32m     22\u001b[0m     \u001b[0;32melse\u001b[0m\u001b[0;34m:\u001b[0m\u001b[0;34m\u001b[0m\u001b[0;34m\u001b[0m\u001b[0m\n\u001b[0;32m---> 23\u001b[0;31m         flow = InstalledAppFlow.from_client_secrets_file(\n\u001b[0m\u001b[1;32m     24\u001b[0m             \u001b[0;34m\"credentials.json\"\u001b[0m\u001b[0;34m,\u001b[0m \u001b[0mSCOPES\u001b[0m\u001b[0;34m\u001b[0m\u001b[0;34m\u001b[0m\u001b[0m\n\u001b[1;32m     25\u001b[0m         )\n","\u001b[0;32m/usr/local/lib/python3.11/dist-packages/google_auth_oauthlib/flow.py\u001b[0m in \u001b[0;36mfrom_client_secrets_file\u001b[0;34m(cls, client_secrets_file, scopes, **kwargs)\u001b[0m\n\u001b[1;32m    196\u001b[0m             \u001b[0mFlow\u001b[0m\u001b[0;34m:\u001b[0m \u001b[0mThe\u001b[0m \u001b[0mconstructed\u001b[0m \u001b[0mFlow\u001b[0m \u001b[0minstance\u001b[0m\u001b[0;34m.\u001b[0m\u001b[0;34m\u001b[0m\u001b[0;34m\u001b[0m\u001b[0m\n\u001b[1;32m    197\u001b[0m         \"\"\"\n\u001b[0;32m--> 198\u001b[0;31m         \u001b[0;32mwith\u001b[0m \u001b[0mopen\u001b[0m\u001b[0;34m(\u001b[0m\u001b[0mclient_secrets_file\u001b[0m\u001b[0;34m,\u001b[0m \u001b[0;34m\"r\"\u001b[0m\u001b[0;34m)\u001b[0m \u001b[0;32mas\u001b[0m \u001b[0mjson_file\u001b[0m\u001b[0;34m:\u001b[0m\u001b[0;34m\u001b[0m\u001b[0;34m\u001b[0m\u001b[0m\n\u001b[0m\u001b[1;32m    199\u001b[0m             \u001b[0mclient_config\u001b[0m \u001b[0;34m=\u001b[0m \u001b[0mjson\u001b[0m\u001b[0;34m.\u001b[0m\u001b[0mload\u001b[0m\u001b[0;34m(\u001b[0m\u001b[0mjson_file\u001b[0m\u001b[0;34m)\u001b[0m\u001b[0;34m\u001b[0m\u001b[0;34m\u001b[0m\u001b[0m\n\u001b[1;32m    200\u001b[0m \u001b[0;34m\u001b[0m\u001b[0m\n","\u001b[0;31mFileNotFoundError\u001b[0m: [Errno 2] No such file or directory: 'credentials.json'"]}]},{"cell_type":"markdown","metadata":{"id":"6600af70"},"source":["## Setup google api client\n","\n","### Subtask:\n","Set up the Google API client and authenticate with your Gmail account.\n"]},{"cell_type":"markdown","metadata":{"id":"133980ad"},"source":["## Summary:\n","\n","### Data Analysis Key Findings\n","\n","*   The attempt to set up the Google API client and authenticate with a Gmail account failed because the required `credentials.json` file was not found.\n","*   The `credentials.json` file is essential for initiating the Google API authentication flow.\n","\n","### Insights or Next Steps\n","\n","*   Ensure the `credentials.json` file is present in the working directory before attempting authentication.\n","*   Verify that the `credentials.json` file contains valid client credentials obtained from the Google Cloud Console.\n"]}],"metadata":{"colab":{"provenance":[]},"kernelspec":{"display_name":"Python 3","name":"python3"}},"nbformat":4,"nbformat_minor":0}